<html>
<head>
  <title>Rain</title>
  <script src="//cdn.jsdelivr.net/sockjs/1.0.3/sockjs.min.js"></script>
  <script src="/rain/js/vertx-eventbus-3.2.1.js"></script>
  <script>
  var eb = new EventBus('http://localhost:8080/rain/eventbus');
  eb.onopen = function() {
    // set a handler to receive a message
    eb.registerHandler('RainDrop', function(error, message) {
      var rd = message.body;
      document.getElementById('raindrop-count').innerHTML = "RainDrop[" + rd.count + "](" + rd.x + ", " + rd.x + ")";
    });
  }

  var rainIntensity = 0.0;
  function addRain(deltaIntensity) {
    rainIntensity += deltaIntensity;
    eb.send('RainMaker', {intensity: rainIntensity});
  }
  </script>
</head>
<body>
  <h1>Hello Rain!</h1>
  <div id="raindrop-count"></div>
  <button onclick="addRain(0.1)">up</button>
  <button onclick="addRain(-0.1)">down</button>
  <button onclick="addRain(-rainIntensity)">stop</button>
</body>
</html>